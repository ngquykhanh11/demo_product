{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\ADMIN\\\\Downloads\\\\demo\\\\demo\\\\frontend\\\\src\\\\pages\\\\my_product.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from \"react\";\nimport axios from \"axios\";\nimport { MainNav } from \"../components/nav\";\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport const MyProduct = () => {\n  _s();\n  const [products, setProducts] = useState([]);\n  const [editingId, setEditingId] = useState(null);\n  const [editField, setEditField] = useState(\"\");\n  const [editValue, setEditValue] = useState(\"\");\n  useEffect(() => {\n    const fetchMyProducts = async () => {\n      try {\n        const walletAddress = await window.ethereum.request({\n          method: 'eth_requestAccounts'\n        });\n        const res = await axios.get(`http://localhost:8000/api/products`);\n        const myProducts = res.data.content.filter(p => p.creator === walletAddress[0]);\n        setProducts(myProducts);\n      } catch (err) {\n        console.error(\"Failed to fetch products\", err);\n      }\n    };\n    fetchMyProducts();\n  }, []);\n  const handleEdit = async id => {\n    try {\n      const res = await axios.patch(`http://localhost:8000/api/product/${id}`, null, {\n        params: {\n          column: editField,\n          new_value: editValue\n        }\n      });\n      alert(res.data.message);\n      window.location.reload(); // reload after edit\n    } catch (err) {\n      var _err$response, _err$response$data;\n      alert(\"Update failed: \" + (((_err$response = err.response) === null || _err$response === void 0 ? void 0 : (_err$response$data = _err$response.data) === null || _err$response$data === void 0 ? void 0 : _err$response$data.detail) || \"Unknown error\"));\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(MainNav, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        padding: \"40px\"\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"My Products\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 43,\n        columnNumber: 9\n      }, this), products.map(product => /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          border: \"1px solid #ccc\",\n          padding: \"15px\",\n          margin: \"10px\"\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: product.name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 46,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"Description: \", product.description]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 47,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"Price: \", product.price]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 48,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"Category: \", product.category]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 49,\n          columnNumber: 13\n        }, this), editingId === product.id ? /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(\"select\", {\n            onChange: e => setEditField(e.target.value),\n            value: editField,\n            children: [/*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"\",\n              children: \"Select field\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 54,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"name\",\n              children: \"Name\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 55,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"description\",\n              children: \"Description\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 56,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"price\",\n              children: \"Price\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 57,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"category\",\n              children: \"Category\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 58,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 53,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            placeholder: \"New value\",\n            onChange: e => setEditValue(e.target.value),\n            value: editValue\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 60,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => handleEdit(product.id),\n            children: \"Save\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 66,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => setEditingId(null),\n            children: \"Cancel\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 67,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true) : /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => setEditingId(product.id),\n          children: \"Edit\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 70,\n          columnNumber: 15\n        }, this)]\n      }, product.id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 45,\n        columnNumber: 11\n      }, this))]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n};\n_s(MyProduct, \"fctwctLPB7pftINDXIzdnwgyqv0=\");\n_c = MyProduct;\nvar _c;\n$RefreshReg$(_c, \"MyProduct\");","map":{"version":3,"names":["React","useEffect","useState","axios","MainNav","jsxDEV","_jsxDEV","Fragment","_Fragment","MyProduct","_s","products","setProducts","editingId","setEditingId","editField","setEditField","editValue","setEditValue","fetchMyProducts","walletAddress","window","ethereum","request","method","res","get","myProducts","data","content","filter","p","creator","err","console","error","handleEdit","id","patch","params","column","new_value","alert","message","location","reload","_err$response","_err$response$data","response","detail","children","fileName","_jsxFileName","lineNumber","columnNumber","style","padding","map","product","border","margin","name","description","price","category","onChange","e","target","value","type","placeholder","onClick","_c","$RefreshReg$"],"sources":["C:/Users/ADMIN/Downloads/demo/demo/frontend/src/pages/my_product.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport axios from \"axios\";\r\nimport { MainNav } from \"../components/nav\";\r\n\r\nexport const MyProduct = () => {\r\n  const [products, setProducts] = useState([]);\r\n  const [editingId, setEditingId] = useState(null);\r\n  const [editField, setEditField] = useState(\"\");\r\n  const [editValue, setEditValue] = useState(\"\");\r\n\r\n  useEffect(() => {\r\n    const fetchMyProducts = async () => {\r\n      try {\r\n        const walletAddress = await window.ethereum.request({ method: 'eth_requestAccounts' });\r\n        const res = await axios.get(`http://localhost:8000/api/products`);\r\n        const myProducts = res.data.content.filter(p => p.creator === walletAddress[0]);\r\n        setProducts(myProducts);\r\n      } catch (err) {\r\n        console.error(\"Failed to fetch products\", err);\r\n      }\r\n    };\r\n    fetchMyProducts();\r\n  }, []);\r\n\r\n  \r\n\r\n  const handleEdit = async (id) => {\r\n    try {\r\n      const res = await axios.patch(`http://localhost:8000/api/product/${id}`, null, {\r\n        params: { column: editField, new_value: editValue },\r\n      });\r\n      alert(res.data.message);\r\n      window.location.reload(); // reload after edit\r\n    } catch (err) {\r\n      alert(\"Update failed: \" + (err.response?.data?.detail || \"Unknown error\"));\r\n    }\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <MainNav />\r\n      <div style={{ padding: \"40px\" }}>\r\n        <h1>My Products</h1>\r\n        {products.map((product) => (\r\n          <div key={product.id} style={{ border: \"1px solid #ccc\", padding: \"15px\", margin: \"10px\" }}>\r\n            <h3>{product.name}</h3>\r\n            <p>Description: {product.description}</p>\r\n            <p>Price: {product.price}</p>\r\n            <p>Category: {product.category}</p>\r\n\r\n            {editingId === product.id ? (\r\n              <>\r\n                <select onChange={(e) => setEditField(e.target.value)} value={editField}>\r\n                  <option value=\"\">Select field</option>\r\n                  <option value=\"name\">Name</option>\r\n                  <option value=\"description\">Description</option>\r\n                  <option value=\"price\">Price</option>\r\n                  <option value=\"category\">Category</option>\r\n                </select>\r\n                <input\r\n                  type=\"text\"\r\n                  placeholder=\"New value\"\r\n                  onChange={(e) => setEditValue(e.target.value)}\r\n                  value={editValue}\r\n                />\r\n                <button onClick={() => handleEdit(product.id)}>Save</button>\r\n                <button onClick={() => setEditingId(null)}>Cancel</button>\r\n              </>\r\n            ) : (\r\n              <button onClick={() => setEditingId(product.id)}>Edit</button>\r\n            )}\r\n          </div>\r\n        ))}\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}